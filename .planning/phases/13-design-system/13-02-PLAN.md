---
phase: 13-design-system
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - website/package.json
  - website/providers/ThemeProvider.tsx
  - website/app/providers.tsx
  - website/app/layout.tsx
  - website/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Dark mode is the default theme"
    - "Theme can toggle between dark and light"
    - "No flash of wrong theme on page load (SSR-safe)"
    - "Typography scale has 16px+ body text"
    - "Color contrast meets WCAG 4.5:1 for text"
  artifacts:
    - path: "website/providers/ThemeProvider.tsx"
      provides: "Theme context provider with dark default"
      contains: "defaultTheme=\"dark\""
    - path: "website/app/globals.css"
      provides: "Design tokens and color palette"
      contains: "--primary:"
  key_links:
    - from: "website/app/providers.tsx"
      to: "website/providers/ThemeProvider.tsx"
      via: "import and render"
      pattern: "ThemeProvider"
    - from: "website/app/layout.tsx"
      to: "website/app/globals.css"
      via: "import"
      pattern: "import.*globals.css"
---

<objective>
Configure dark mode theming with next-themes and establish design tokens (typography, colors, spacing) in Tailwind 4.0 CSS-first configuration.

Purpose: Create the visual foundation with dark mode default (per CONTEXT.md), WCAG-compliant colors, and Hebrew-optimized typography.
Output: ThemeProvider with dark default, complete color palette, typography scale, and spacing system in globals.css @theme.
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/13-design-system/13-RESEARCH.md
@.planning/phases/13-design-system/13-CONTEXT.md
@website/app/globals.css
@website/app/providers.tsx
@website/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install next-themes and create ThemeProvider</name>
  <files>website/package.json, website/providers/ThemeProvider.tsx, website/app/providers.tsx, website/app/layout.tsx</files>
  <action>
Install next-themes:
```bash
cd website && pnpm add next-themes
```

Create ThemeProvider at website/providers/ThemeProvider.tsx:
```typescript
"use client";

import { ThemeProvider as NextThemesProvider } from "next-themes";

interface ThemeProviderProps {
  children: React.ReactNode;
}

export function ThemeProvider({ children }: ThemeProviderProps) {
  return (
    <NextThemesProvider
      attribute="class"
      defaultTheme="dark"
      enableSystem
      disableTransitionOnChange
    >
      {children}
    </NextThemesProvider>
  );
}
```

Key configuration per CONTEXT.md:
- `defaultTheme="dark"` - Dark mode by default
- `attribute="class"` - Uses .dark class for Tailwind
- `enableSystem` - Respects user system preference
- `disableTransitionOnChange` - Prevents flash on theme change

Update website/app/providers.tsx to wrap children with ThemeProvider:
- Import ThemeProvider from "@/providers/ThemeProvider"
- Add ThemeProvider inside the existing provider chain
- Provider order should be: DirectionProvider > ThemeProvider > MotionProvider > SmoothScroll

Update website/app/layout.tsx:
- Add `suppressHydrationWarning` to the `<html>` element (required for next-themes SSR)
  </action>
  <verify>
- `cat website/package.json | grep next-themes` shows version
- `cat website/providers/ThemeProvider.tsx | grep "defaultTheme"` shows "dark"
- `cat website/app/providers.tsx | grep "ThemeProvider"` shows import
- `cat website/app/layout.tsx | grep "suppressHydrationWarning"` shows attribute
- `pnpm run build` in website/ succeeds
  </verify>
  <done>
- next-themes installed
- ThemeProvider.tsx created with dark default
- providers.tsx updated with ThemeProvider in chain
- layout.tsx has suppressHydrationWarning
- Build passes with no hydration warnings
  </done>
</task>

<task type="auto">
  <name>Task 2: Create comprehensive design tokens in globals.css</name>
  <files>website/app/globals.css</files>
  <action>
Replace the current globals.css with comprehensive Tailwind 4.0 @theme configuration.

The design system must include:

**1. Color Palette (Bold with contrast per CONTEXT.md)**

Primary color: Orange (#f97316 / orange-500) - Conversion-optimized CTA color
- Orange is proven for conversion CTAs
- High contrast in both dark and light modes
- Energetic, warm, approachable

Color system using HSL for shadcn/ui compatibility:
- background/foreground (dark mode default)
- primary/primary-foreground (orange CTA)
- secondary/secondary-foreground
- muted/muted-foreground
- accent/accent-foreground
- destructive/destructive-foreground
- border, input, ring (focus)
- card/card-foreground

**2. Typography Scale (WCAG compliant - 16px+ body)**
- xs: 12px (captions only)
- sm: 14px (secondary text)
- base: 16px (body minimum)
- lg: 18px (lead text)
- xl: 20px (h4)
- 2xl: 24px (h3)
- 3xl: 30px (h2)
- 4xl: 36px (h1 mobile)
- 5xl: 48px (h1 desktop)

Line heights: 1.25 (tight/headings), 1.5 (normal), 1.625 (relaxed/Hebrew)

**3. Spacing Scale**
- xs: 4px, sm: 8px, md: 16px, lg: 24px, xl: 32px, 2xl: 48px, 3xl: 64px

**4. Border Radius (moderately rounded per CONTEXT.md)**
- sm: 6px, md: 8px, lg: 12px, xl: 16px, full: 9999px

**5. Shadows (subtle depth per CONTEXT.md)**

Write the complete globals.css file with:
```css
@import "tailwindcss";

/* Dark mode custom variant for Tailwind 4 */
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Font - Heebo Hebrew */
  --font-sans: var(--font-heebo), Arial, sans-serif;

  /* Color palette - HSL for shadcn/ui compatibility */
  /* ... all colors ... */

  /* Typography scale */
  /* ... all sizes ... */

  /* Spacing */
  /* ... all spacing ... */

  /* Border radius */
  /* ... all radii ... */
}

/* Base layer for CSS variables */
:root {
  /* Light mode colors */
}

.dark {
  /* Dark mode colors (default) */
}

/* Shimmer animation */
@keyframes shimmer { ... }
.animate-shimmer { ... }

/* Focus ring utility */
.focus-ring {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
}
```
  </action>
  <verify>
- `grep "--primary:" website/app/globals.css` shows primary color defined
- `grep "font-size-base: 1rem" website/app/globals.css` shows 16px body
- `grep "@custom-variant dark" website/app/globals.css` shows dark mode variant
- `grep ":root" website/app/globals.css` shows light mode variables
- `grep ".dark" website/app/globals.css` shows dark mode variables
- `pnpm run build` in website/ succeeds
  </verify>
  <done>
- Complete color palette with light and dark mode variables
- Typography scale with 16px+ body text
- Spacing system defined
- Border radius values (8-12px for buttons/cards)
- Dark mode as visual default via .dark class
- Build passes
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `cd website && pnpm run build` - must succeed
2. ThemeProvider exists with defaultTheme="dark"
3. Provider chain correct: DirectionProvider > ThemeProvider > MotionProvider > SmoothScroll
4. globals.css has complete color palette with dark/light modes
5. Typography scale starts at 16px for body
6. No hydration warnings
</verification>

<success_criteria>
- next-themes installed and configured
- ThemeProvider uses dark as default theme
- No flash of wrong theme (SSR-safe with suppressHydrationWarning)
- Color palette defined with WCAG-compliant contrast
- Typography scale has 16px minimum body text
- Spacing and radius tokens defined
- Orange primary color for conversion-optimized CTAs
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-design-system/13-02-SUMMARY.md`
</output>
