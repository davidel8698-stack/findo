---
phase: 13-design-system
plan: 03
type: execute
wave: 2
depends_on: ["13-01", "13-02"]
files_modified:
  - website/lib/animation.ts
  - website/components/motion/variants.ts
  - website/components/motion/ScrollReveal.tsx
  - website/components/motion/FadeIn.tsx
  - website/components/motion/StaggerContainer.tsx
autonomous: true

must_haves:
  truths:
    - "Animation variants use spring physics for playful feel"
    - "ScrollReveal triggers when element enters viewport"
    - "Animations respect prefers-reduced-motion"
    - "Stagger container orchestrates child animations"
  artifacts:
    - path: "website/lib/animation.ts"
      provides: "Animation constants and spring presets"
      contains: "springBouncy"
    - path: "website/components/motion/variants.ts"
      provides: "Reusable Motion variants"
      exports: ["fadeInUp", "staggerContainer", "scaleIn"]
    - path: "website/components/motion/ScrollReveal.tsx"
      provides: "Scroll-triggered animation wrapper"
      contains: "useInView"
    - path: "website/components/motion/FadeIn.tsx"
      provides: "Simple fade-in animation component"
      contains: "m.div"
    - path: "website/components/motion/StaggerContainer.tsx"
      provides: "Staggered children animation"
      contains: "staggerChildren"
  key_links:
    - from: "website/components/motion/ScrollReveal.tsx"
      to: "motion/react"
      via: "useInView hook"
      pattern: "useInView"
    - from: "website/components/motion/variants.ts"
      to: "website/lib/animation.ts"
      via: "spring config import"
      pattern: "from \"@/lib/animation\""
---

<objective>
Create the animation system with Motion variants, ScrollReveal component, and spring physics for the playful character specified in CONTEXT.md.

Purpose: Establish reusable, GPU-accelerated animations that are playful and delightful while respecting accessibility preferences.
Output: Animation variants file, ScrollReveal component, FadeIn component, and StaggerContainer for orchestrated animations.
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/13-design-system/13-RESEARCH.md
@.planning/phases/13-design-system/13-CONTEXT.md
@.planning/phases/12-technical-foundation/12-03-SUMMARY.md
@website/providers/MotionProvider.tsx
@website/lib/gsapConfig.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create animation constants and variants</name>
  <files>website/lib/animation.ts, website/components/motion/variants.ts</files>
  <action>
Create website/lib/animation.ts with spring physics presets:
```typescript
/**
 * Animation constants and spring presets for Findo
 * Playful & delightful character per CONTEXT.md
 */

// Spring presets - bouncy and expressive
export const springBouncy = {
  type: "spring" as const,
  stiffness: 200,
  damping: 15,
};

export const springGentle = {
  type: "spring" as const,
  stiffness: 100,
  damping: 20,
};

export const springSnappy = {
  type: "spring" as const,
  stiffness: 300,
  damping: 25,
};

// Duration presets for non-spring animations
export const duration = {
  fast: 0.15,
  normal: 0.3,
  slow: 0.5,
};

// Stagger delays for theatrical cascade effect
export const stagger = {
  fast: 0.05,
  normal: 0.1,
  slow: 0.15,
};

// Easing for CSS transitions (backup for non-Motion elements)
export const easing = {
  easeOut: "cubic-bezier(0.33, 1, 0.68, 1)",
  easeInOut: "cubic-bezier(0.65, 0, 0.35, 1)",
  bounce: "cubic-bezier(0.68, -0.6, 0.32, 1.6)",
};
```

Create website/components/motion/variants.ts with reusable variants:
```typescript
/**
 * Reusable Motion variants for consistent animations
 * Uses spring physics for playful character
 */

import { Variants } from "motion/react";
import { springBouncy, springGentle, stagger } from "@/lib/animation";

// Fade up - most common entrance animation
export const fadeInUp: Variants = {
  hidden: {
    opacity: 0,
    y: 20
  },
  visible: {
    opacity: 1,
    y: 0,
    transition: springGentle,
  },
};

// Fade in from different directions
export const fadeInDown: Variants = {
  hidden: { opacity: 0, y: -20 },
  visible: { opacity: 1, y: 0, transition: springGentle },
};

export const fadeInLeft: Variants = {
  hidden: { opacity: 0, x: -20 },
  visible: { opacity: 1, x: 0, transition: springGentle },
};

export const fadeInRight: Variants = {
  hidden: { opacity: 0, x: 20 },
  visible: { opacity: 1, x: 0, transition: springGentle },
};

// Scale in - for emphasis
export const scaleIn: Variants = {
  hidden: {
    opacity: 0,
    scale: 0.8
  },
  visible: {
    opacity: 1,
    scale: 1,
    transition: springBouncy,
  },
};

// Pop - bouncy scale for micro-interactions
export const pop: Variants = {
  hidden: { scale: 0.9, opacity: 0 },
  visible: {
    scale: 1,
    opacity: 1,
    transition: springBouncy,
  },
  tap: { scale: 0.95 },
  hover: { scale: 1.02 },
};

// Stagger container - orchestrates children
export const staggerContainer: Variants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: stagger.normal,
      delayChildren: 0.1,
    },
  },
};

// Fast stagger for dense content
export const staggerContainerFast: Variants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: stagger.fast,
      delayChildren: 0.05,
    },
  },
};

// Slow stagger for theatrical effect
export const staggerContainerSlow: Variants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: stagger.slow,
      delayChildren: 0.2,
    },
  },
};
```
  </action>
  <verify>
- `cat website/lib/animation.ts | grep "springBouncy"` shows spring config
- `cat website/components/motion/variants.ts | grep "fadeInUp"` shows variant
- `cat website/components/motion/variants.ts | grep "staggerContainer"` shows stagger
- `pnpm run build` in website/ succeeds
  </verify>
  <done>
- animation.ts has spring presets (bouncy, gentle, snappy)
- variants.ts exports fadeInUp, fadeInDown, fadeInLeft, fadeInRight
- variants.ts exports scaleIn, pop, staggerContainer variants
- Spring physics provide playful, bouncy feel
- Build passes
  </done>
</task>

<task type="auto">
  <name>Task 2: Create motion wrapper components</name>
  <files>website/components/motion/ScrollReveal.tsx, website/components/motion/FadeIn.tsx, website/components/motion/StaggerContainer.tsx, website/components/motion/index.ts</files>
  <action>
Create website/components/motion/ScrollReveal.tsx:
```typescript
"use client";

import { useRef, type ReactNode } from "react";
import { m, useInView, type Variants } from "motion/react";
import { cn } from "@/lib/utils";
import { fadeInUp } from "./variants";

interface ScrollRevealProps {
  children: ReactNode;
  className?: string;
  variants?: Variants;
  delay?: number;
  /** How far from viewport edge to trigger (negative = trigger before visible) */
  margin?: string;
  /** Only animate once, or every time element enters viewport */
  once?: boolean;
}

export function ScrollReveal({
  children,
  className,
  variants = fadeInUp,
  delay = 0,
  margin = "-100px",
  once = true,
}: ScrollRevealProps) {
  const ref = useRef<HTMLDivElement>(null);
  const isInView = useInView(ref, { once, margin });

  return (
    <m.div
      ref={ref}
      initial="hidden"
      animate={isInView ? "visible" : "hidden"}
      variants={variants}
      transition={{ delay }}
      className={cn(className)}
    >
      {children}
    </m.div>
  );
}
```

Create website/components/motion/FadeIn.tsx:
```typescript
"use client";

import { type ReactNode } from "react";
import { m, type Variants } from "motion/react";
import { cn } from "@/lib/utils";
import { fadeInUp } from "./variants";

interface FadeInProps {
  children: ReactNode;
  className?: string;
  variants?: Variants;
  delay?: number;
}

export function FadeIn({
  children,
  className,
  variants = fadeInUp,
  delay = 0,
}: FadeInProps) {
  return (
    <m.div
      initial="hidden"
      animate="visible"
      variants={variants}
      transition={{ delay }}
      className={cn(className)}
    >
      {children}
    </m.div>
  );
}
```

Create website/components/motion/StaggerContainer.tsx:
```typescript
"use client";

import { type ReactNode } from "react";
import { m, type Variants } from "motion/react";
import { cn } from "@/lib/utils";
import { staggerContainer } from "./variants";

interface StaggerContainerProps {
  children: ReactNode;
  className?: string;
  variants?: Variants;
  /** Trigger when in viewport instead of immediately */
  viewport?: boolean;
}

export function StaggerContainer({
  children,
  className,
  variants = staggerContainer,
  viewport = false,
}: StaggerContainerProps) {
  return (
    <m.div
      initial="hidden"
      animate={viewport ? undefined : "visible"}
      whileInView={viewport ? "visible" : undefined}
      viewport={viewport ? { once: true, margin: "-100px" } : undefined}
      variants={variants}
      className={cn(className)}
    >
      {children}
    </m.div>
  );
}
```

Create website/components/motion/index.ts barrel export:
```typescript
// Animation components
export { ScrollReveal } from "./ScrollReveal";
export { FadeIn } from "./FadeIn";
export { StaggerContainer } from "./StaggerContainer";

// Animation variants
export * from "./variants";
```
  </action>
  <verify>
- All 4 files exist in website/components/motion/
- `grep "useInView" website/components/motion/ScrollReveal.tsx` shows hook usage
- `grep "staggerChildren" website/components/motion/variants.ts` shows orchestration
- Index exports all components
- `pnpm run build` in website/ succeeds
  </verify>
  <done>
- ScrollReveal uses useInView with configurable margin
- FadeIn provides simple entrance animation
- StaggerContainer orchestrates children animations
- Barrel export in index.ts
- All components accept custom variants
- Build passes
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `cd website && pnpm run build` - must succeed
2. animation.ts has spring presets
3. variants.ts exports all required variants
4. Motion components properly use useInView, m.div
5. StaggerContainer orchestrates with staggerChildren
</verification>

<success_criteria>
- Spring physics configured (stiffness: 200, damping: 15 for bouncy)
- fadeInUp, scaleIn, staggerContainer variants exported
- ScrollReveal triggers on viewport entry with configurable margin
- StaggerContainer orchestrates children with staggerChildren
- All components use "use client" directive
- All components accept className for styling
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-design-system/13-03-SUMMARY.md`
</output>
