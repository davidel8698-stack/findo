---
phase: 21-background-depth-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - website/components/background/BackgroundDepth.tsx
  - website/components/background/index.ts
autonomous: true

must_haves:
  truths:
    - "Grid pattern visible at 5% opacity covering full viewport"
    - "Gradient orbs create ambient depth with orange/20 blur"
    - "Noise texture adds subtle premium grain"
    - "Orbs move at different speeds during scroll (parallax)"
    - "prefers-reduced-motion disables parallax animation"
  artifacts:
    - path: "website/components/background/BackgroundDepth.tsx"
      provides: "Three-layer background system with parallax"
      min_lines: 80
      contains: "useGSAP"
    - path: "website/components/background/index.ts"
      provides: "Barrel export for BackgroundDepth"
      exports: ["BackgroundDepth"]
  key_links:
    - from: "website/components/background/BackgroundDepth.tsx"
      to: "gsap/ScrollTrigger"
      via: "useGSAP hook"
      pattern: "gsap\\.to.*scrollTrigger"
---

<objective>
Create the BackgroundDepth component with three visual layers (grid pattern, gradient orbs, noise texture) and GSAP-powered parallax animation.

Purpose: Establish sophisticated visual environment that sets premium tone (requirements BG-01 through BG-06).
Output: Reusable BackgroundDepth component ready for layout integration.
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-background-depth-system/21-RESEARCH.md

# Existing patterns to follow
@website/app/globals.css
@website/components/SmoothScroll.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BackgroundDepth Component with All Layers</name>
  <files>
    website/components/background/BackgroundDepth.tsx
    website/components/background/index.ts
  </files>
  <action>
Create `website/components/background/` directory and implement BackgroundDepth.tsx following the research pattern:

**Component structure:**
1. Fixed-position container with `-z-10`, `overflow-hidden`, `pointer-events-none`, `aria-hidden="true"`
2. Three layers in order:
   - Layer 1: Inline SVG grid pattern at `opacity-[0.05]` with unique pattern ID `bg-grid-pattern`
   - Layer 2: Blurred gradient orbs container (`filter: blur(80px)` on container, NOT on orbs)
   - Layer 3: Inline SVG noise texture at `opacity-[0.03]` using feTurbulence filter

**Orb configuration (from research):**
- 3 orbs total (within will-change budget)
- Orb 1: Top-right, `w-[50vw] h-[50vw] max-w-[500px] max-h-[500px]`, `bg-orange-500/20`
- Orb 2: Bottom-left, `w-[40vw] h-[40vw] max-w-[400px] max-h-[400px]`, `bg-amber-500/15`
- Orb 3: Center, `w-[30vw] h-[30vw] max-w-[300px] max-h-[300px]`, `bg-orange-400/10`
- All orbs: `rounded-full`, `will-change-transform`
- Use viewport units for responsive sizing without breakpoint jumps (BG-04)

**GSAP Parallax (BG-06):**
- Import `useGSAP` from `@gsap/react` and `ScrollTrigger` from `gsap/ScrollTrigger`
- Register ScrollTrigger plugin with `gsap.registerPlugin(ScrollTrigger)`
- Check `prefers-reduced-motion` BEFORE initializing parallax (use useState + useEffect)
- If motion preferred, apply subtle y-transforms:
  - Orb 1: y: -80px
  - Orb 2: y: -120px
  - Orb 3: y: -60px
- Use `scrub: 1.5` for smooth organic feel
- Trigger: `document.body`, start: `"top top"`, end: `"bottom bottom"`

**Critical implementation notes:**
- Apply `filter: blur(80px)` to orb CONTAINER div, NOT individual orbs (performance per research)
- Use `inset-0` for full coverage
- Dark mode: zinc-400 stroke for grid, same orb colors work in dark
- Add `"use client"` directive at top (GSAP requires client-side)

Create barrel export in index.ts:
```typescript
export { BackgroundDepth } from "./BackgroundDepth";
```
  </action>
  <verify>
1. File exists: `website/components/background/BackgroundDepth.tsx`
2. File exists: `website/components/background/index.ts`
3. TypeScript compiles: `cd website && npx tsc --noEmit`
4. Component imports GSAP correctly (no runtime errors)
  </verify>
  <done>
BackgroundDepth component exists with:
- Three-layer structure (grid, orbs, noise)
- GSAP ScrollTrigger parallax on 3 orbs
- prefers-reduced-motion check
- Viewport-unit sizing for responsive behavior
- Barrel export ready for import
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. TypeScript compilation passes without errors
2. Component file contains all three layers (grep for "grid-pattern", "blur(80px)", "feTurbulence")
3. GSAP imports present (grep for "useGSAP", "ScrollTrigger")
4. Reduced motion check present (grep for "prefers-reduced-motion")
5. will-change-transform present on orb elements
</verification>

<success_criteria>
- BackgroundDepth.tsx is a valid React component
- Three visual layers are implemented (grid, orbs, noise)
- Parallax animation uses GSAP ScrollTrigger
- Motion preference is respected
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/21-background-depth-system/21-01-SUMMARY.md`
</output>
