---
phase: 24-micro-interactions
plan: 03
type: execute
wave: 2
depends_on: ["24-01"]
files_modified:
  - website/components/ui/link.tsx
  - website/components/molecules/NavLink.tsx
autonomous: false

must_haves:
  truths:
    - "Inline links have animated underline that slides in from center"
    - "Link underlines work correctly in RTL (slide from right)"
    - "Nav links have background fill on hover"
    - "All link transitions are 200ms with ease-out"
    - "Visual verification confirms micro-interactions look premium"
  artifacts:
    - path: "website/components/ui/link.tsx"
      provides: "AnimatedLink component with underline animation"
      exports: ["AnimatedLink"]
    - path: "website/components/molecules/NavLink.tsx"
      provides: "NavLink with background fill hover"
      contains: "bg-accent"
  key_links:
    - from: "link.tsx"
      to: "globals.css"
      via: "className"
      pattern: "link-underline"
---

<objective>
Create AnimatedLink component and enhance NavLink with micro-interaction hover states. Complete visual verification of all Phase 24 micro-interactions.

Purpose: Satisfy MICRO-04 (animated link underline), RTL-06 (underline from right in RTL), and verify all micro-interactions meet premium quality standard. Nav links get different treatment per CONTEXT.md (background fill, not underline).

Output: New AnimatedLink component, enhanced NavLink, visual verification checkpoint.
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-micro-interactions/24-RESEARCH.md
@.planning/phases/24-micro-interactions/24-CONTEXT.md
@.planning/phases/24-micro-interactions/24-01-SUMMARY.md
@website/components/molecules/NavLink.tsx
@website/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AnimatedLink component for inline links</name>
  <files>website/components/ui/link.tsx</files>
  <action>
Create a new AnimatedLink component for inline links with animated underline.

Create file: website/components/ui/link.tsx

```typescript
import * as React from "react";
import Link from "next/link";
import { cn } from "@/lib/utils";

export interface AnimatedLinkProps extends React.ComponentProps<typeof Link> {
  /**
   * Underline animation style
   * - "center": underline scales from center outward (default for inline links)
   * - "none": no underline animation
   */
  underline?: "center" | "none";
  /** Show external link indicator (arrow icon) */
  external?: boolean;
}

/**
 * AnimatedLink - inline link with animated underline
 *
 * Uses CSS utility classes from globals.css (.link-underline)
 * RTL support: underline animates correctly in RTL via inset-inline-* properties
 *
 * @example
 * <AnimatedLink href="/about">Learn more</AnimatedLink>
 * <AnimatedLink href="https://example.com" external>Visit site</AnimatedLink>
 */
const AnimatedLink = React.forwardRef<HTMLAnchorElement, AnimatedLinkProps>(
  ({ className, underline = "center", external, children, ...props }, ref) => {
    const underlineClass = underline === "center" ? "link-underline" : "";

    const externalProps = external
      ? {
          target: "_blank" as const,
          rel: "noopener noreferrer",
        }
      : {};

    return (
      <Link
        ref={ref}
        className={cn(
          "inline-flex items-center gap-1",
          "text-foreground",
          // Transition for text brightness on hover
          "transition-[filter] duration-200 ease-out",
          "hover:brightness-110",
          // Focus visible state
          "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background rounded-sm",
          underlineClass,
          className
        )}
        {...externalProps}
        {...props}
      >
        {children}
        {external && (
          <svg
            className="h-3.5 w-3.5 transition-transform duration-150 ease-out group-hover:translate-x-0.5 group-hover:-translate-y-0.5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fillRule="evenodd"
              d="M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z"
              clipRule="evenodd"
            />
            <path
              fillRule="evenodd"
              d="M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z"
              clipRule="evenodd"
            />
          </svg>
        )}
      </Link>
    );
  }
);

AnimatedLink.displayName = "AnimatedLink";

export { AnimatedLink };
```

IMPORTANT:
- Uses .link-underline utility class from globals.css (created in 24-01)
- RTL support is handled by CSS (inset-inline-start/end in globals.css)
- External links get arrow icon with hover transform
- Brightness increase on hover for text (1.1x per RESEARCH.md)
  </action>
  <verify>
Run: `cat website/components/ui/link.tsx | head -30`
Should show AnimatedLink component with link-underline class.
  </verify>
  <done>
AnimatedLink component:
- Uses link-underline CSS utility for underline animation
- Supports external prop with arrow icon
- Has brightness hover effect
- RTL handled via CSS utilities
- Proper focus-visible states
  </done>
</task>

<task type="auto">
  <name>Task 2: Enhance NavLink with background fill hover</name>
  <files>website/components/molecules/NavLink.tsx</files>
  <action>
Update NavLink to use background fill on hover instead of just color change (per CONTEXT.md "nav links need different treatment").

Changes:

1. Add background fill on hover:
```typescript
<Link
  href={href}
  onClick={onClick}
  className={cn(
    // Base styles
    "px-3 py-2 rounded-md",
    "text-foreground",
    // Hover: background fill (per CONTEXT.md - different from inline links)
    "hover:bg-accent hover:text-accent-foreground",
    // Transition for smooth background fill (MICRO-07, MICRO-08)
    "transition-[background-color,color] duration-200 ease-out",
    // Focus visible
    "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",
    // Active state
    isActive && "bg-accent text-accent-foreground font-medium",
    className
  )}
>
  {title}
</Link>
```

2. Keep disabled span styling unchanged.

IMPORTANT:
- Background fill is the hover effect, NOT underline (per CONTEXT.md)
- Padding added for touch target and background area
- Transition duration 200ms with ease-out (MICRO-07, MICRO-08)
  </action>
  <verify>
Run: `grep -n "bg-accent\|duration-200" website/components/molecules/NavLink.tsx`
Should show background hover and transition duration.
  </verify>
  <done>
NavLink component:
- Uses bg-accent on hover (background fill)
- Has px-3 py-2 padding for touch target
- Transition is 200ms with ease-out
- Active state has bg-accent background
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
All Phase 24 micro-interactions:
1. Button shadow-lift hover (y: -1, shadow increase)
2. Button press feedback (scale 0.98, reduced shadow)
3. Card lift hover (already exists, verified -4px)
4. Animated link underlines (scale from center)
5. Input focus glow (4px spread)
6. NavLink background fill hover
7. Error shake animation (CSS keyframes)
  </what-built>
  <how-to-verify>
1. Start dev server: `cd website && npm run dev`
2. Open http://localhost:3000

**Button hover/press (MICRO-01, MICRO-02):**
- Hover over any orange CTA button
- Should see subtle lift (1px up) + shadow increase
- Should NOT see scale increase (except hero CTA)
- Click and hold - should scale down slightly (0.98)
- Release - should return to hover state smoothly
- Check disabled buttons have NO hover effect

**Card hover (MICRO-03 - already done, verify):**
- Hover over testimonial or feature cards
- Should lift 4px with shadow increase

**Link underlines (MICRO-04, RTL-06):**
- If any AnimatedLink components are used, check underline animation
- Underline should scale from center outward
- (RTL test requires rtl page - skip if not available)

**Input focus (MICRO-05):**
- Click on form inputs (lead capture form)
- Should see glow effect around input (4px spread)
- Transition should be smooth, 200ms

**NavLink hover:**
- Hover over nav links in header
- Should see background fill (not underline)

**Transition timing (MICRO-07, MICRO-08):**
- All transitions should feel snappy (150-200ms)
- No linear easing - all should use ease-out
- Nothing should feel instant or sluggish

**Performance (MICRO-07):**
- Open DevTools > Performance
- Interact with buttons/links
- Check for 60fps (no jank)

**Reduced motion:**
- Enable "Reduce motion" in OS settings
- Refresh page
- Check animations are disabled/minimal
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. AnimatedLink component exists with link-underline class: `cat website/components/ui/link.tsx`
2. NavLink has bg-accent hover: `grep "bg-accent" website/components/molecules/NavLink.tsx`
3. All transitions are 200ms: `grep "duration-200" website/components/molecules/NavLink.tsx`
4. No TypeScript errors: `cd website && npx tsc --noEmit`
5. Human verified micro-interactions are premium quality
</verification>

<success_criteria>
- AnimatedLink component exists using .link-underline CSS utility - MICRO-04
- Link underlines work in RTL (handled by CSS inset-inline-*) - RTL-06
- NavLink uses background fill hover (different from inline links) - per CONTEXT.md
- All transitions are 200ms with ease-out - MICRO-07, MICRO-08
- Visual verification confirms:
  - Buttons lift on hover, scale on press
  - Cards lift on hover
  - Links have animated underlines
  - Inputs have focus glow
  - No jank, 60fps performance
</success_criteria>

<output>
After completion, create `.planning/phases/24-micro-interactions/24-03-SUMMARY.md`
</output>
