---
phase: 25-animation-choreography
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - website/lib/hooks/useHeroEntrance.ts
  - website/lib/hooks/index.ts
  - website/components/sections/hero/Hero.tsx
  - website/components/sections/hero/HeroContent.tsx
autonomous: true

must_haves:
  truths:
    - "Hero section has 7-phase orchestrated entrance sequence completing in ~1.2s"
    - "Background fades in first (0-300ms)"
    - "Headline reveals with fade + 30px rise (300-800ms)"
    - "Phone mockup has special treatment with larger motion (40-60px rise)"
    - "Activity feed starts animating after 1000ms mark"
  artifacts:
    - path: "website/lib/hooks/useHeroEntrance.ts"
      provides: "GSAP timeline orchestration for hero entrance"
      exports: ["useHeroEntrance"]
    - path: "website/components/sections/hero/Hero.tsx"
      provides: "Hero section with entrance choreography data attributes"
      contains: "data-hero-"
  key_links:
    - from: "website/components/sections/hero/Hero.tsx"
      to: "website/lib/hooks/useHeroEntrance.ts"
      via: "useHeroEntrance hook"
      pattern: "useHeroEntrance"
    - from: "website/lib/hooks/useHeroEntrance.ts"
      to: "gsap.timeline"
      via: "GSAP timeline position parameters"
      pattern: "gsap\\.timeline|tl\\.fromTo"
---

<objective>
Implement hero entrance choreography using GSAP timeline with position parameters for ~30% overlap timing per CONTEXT.md.

Purpose: Create a "snappy and confident" hero entrance that completes in ~1s, establishing the premium feel that differentiates Findo from typical SMB websites.

Output:
- useHeroEntrance hook orchestrating the 7-phase GSAP timeline (uses gsap.matchMedia for reduced motion detection)
- Hero section with data attributes for timeline targeting
- Barrel export in lib/hooks/index.ts
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/25-animation-choreography/25-CONTEXT.md
@.planning/phases/25-animation-choreography/25-RESEARCH.md

Reference files:
@website/lib/gsapConfig.ts
@website/lib/animation.ts
@website/components/sections/hero/Hero.tsx
@website/components/sections/hero/HeroContent.tsx
@website/components/sections/hero/PhoneMockup.tsx
@website/components/sections/hero/ActivityFeed.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create useHeroEntrance hook with GSAP timeline</name>
  <files>website/lib/hooks/useHeroEntrance.ts</files>
  <action>
Create the hero entrance orchestration hook using GSAP timeline.

Timeline timing per CONTEXT.md (snappy, ~1s total, ~30% overlap):
- Phase 1: Background fade (0-300ms) - `tl.to("[data-hero-bg]", { opacity: 1, duration: 0.3 }, 0)`
- Phase 2: Nav slide down (200-500ms) - `tl.fromTo("[data-hero-nav]", { y: -20, opacity: 0 }, { y: 0, opacity: 1, duration: 0.3 }, 0.2)`
- Phase 3: Headline reveal (300-800ms) - 30px rise, 0.5s duration, starts at 0.3s
- Phase 4: Subheadline fade up (600-900ms) - 20px rise, 0.3s duration, starts at 0.6s
- Phase 5: CTAs scale in (800-1100ms) - scale 0.9→1, `back.out(1.7)` easing, 0.3s duration, starts at 0.8s
- Phase 6: Phone mockup (500-1200ms) - 60px rise (special treatment), 0.7s duration, starts at 0.5s
- Phase 7: Activity feed trigger (1000ms) - dispatch custom event 'hero-entrance-complete'

Reduced motion fallback per CONTEXT.md:
- Opacity-only, 150-200ms duration
- Use gsap.matchMedia() for auto-revert

Implementation:
```typescript
"use client";

import { useRef, useCallback } from "react";
import { gsap, useGSAP } from "@/lib/gsapConfig";

interface UseHeroEntranceReturn {
  scopeRef: React.RefObject<HTMLElement | null>;
  isComplete: boolean;
}

export function useHeroEntrance(): UseHeroEntranceReturn {
  const scopeRef = useRef<HTMLElement>(null);
  const isCompleteRef = useRef(false);

  useGSAP(() => {
    if (!scopeRef.current) return;

    const mm = gsap.matchMedia();

    mm.add({
      reduceMotion: "(prefers-reduced-motion: reduce)",
      standard: "(prefers-reduced-motion: no-preference)",
    }, (context) => {
      const { reduceMotion } = context.conditions!;

      // Set initial state - everything invisible
      gsap.set("[data-hero-animate]", { opacity: 0 });

      if (reduceMotion) {
        // Reduced motion: opacity-only, 150ms per CONTEXT.md
        gsap.to("[data-hero-animate]", {
          opacity: 1,
          duration: 0.15,
          stagger: 0.05,
          onComplete: () => {
            isCompleteRef.current = true;
            window.dispatchEvent(new CustomEvent('hero-entrance-complete'));
          },
        });
        return;
      }

      // Full 7-phase entrance
      const tl = gsap.timeline({
        defaults: { ease: "power2.out" },
        onComplete: () => {
          isCompleteRef.current = true;
        },
      });

      // Phase 1: Background (0-300ms)
      tl.to("[data-hero-bg]", { opacity: 1, duration: 0.3 }, 0);

      // Phase 2: Nav slide down (200-500ms)
      tl.fromTo("[data-hero-nav]",
        { y: -20, opacity: 0 },
        { y: 0, opacity: 1, duration: 0.3 },
        0.2
      );

      // Phase 3: Headline (300-800ms) - 30px rise per CONTEXT.md
      tl.fromTo("[data-hero-headline]",
        { y: 30, opacity: 0 },
        { y: 0, opacity: 1, duration: 0.5 },
        0.3
      );

      // Phase 4: Subheadline (600-900ms)
      tl.fromTo("[data-hero-subheadline]",
        { y: 20, opacity: 0 },
        { y: 0, opacity: 1, duration: 0.3 },
        0.6
      );

      // Phase 5: CTAs (800-1100ms) - bounce easing
      tl.fromTo("[data-hero-cta]",
        { scale: 0.9, opacity: 0 },
        { scale: 1, opacity: 1, ease: "back.out(1.7)", duration: 0.3 },
        0.8
      );

      // Phase 6: Phone mockup (500-1200ms) - special treatment, 60px rise
      tl.fromTo("[data-hero-mockup]",
        { y: 60, opacity: 0 },
        { y: 0, opacity: 1, duration: 0.7 },
        0.5
      );

      // Phase 7: Activity feed trigger (1000ms)
      tl.call(() => {
        window.dispatchEvent(new CustomEvent('hero-entrance-complete'));
      }, [], 1.0);
    });

    return () => mm.revert();
  }, { scope: scopeRef });

  return {
    scopeRef,
    isComplete: isCompleteRef.current,
  };
}
```

Export from lib/hooks/index.ts.
  </action>
  <verify>File exists with useHeroEntrance hook that creates GSAP timeline</verify>
  <done>useHeroEntrance hook created with 7-phase GSAP timeline and reduced motion fallback via gsap.matchMedia()</done>
</task>

<task type="auto">
  <name>Task 2: Add data attributes and wire Hero entrance</name>
  <files>website/components/sections/hero/Hero.tsx, website/components/sections/hero/HeroContent.tsx</files>
  <action>
Update Hero components to support the entrance choreography.

**Hero.tsx changes:**
1. Import and use `useHeroEntrance` hook
2. Add `ref={scopeRef}` to the root element
3. Add `data-hero-bg` to the section (background element)
4. Add `data-hero-mockup` and `data-hero-animate` to the phone mockup container

**HeroContent.tsx changes:**
1. Add `data-hero-headline` and `data-hero-animate` to the h1
2. Add `data-hero-subheadline` and `data-hero-animate` to the subheadline p
3. Add `data-hero-cta` and `data-hero-animate` to the CTAGroup wrapper div
4. Add `data-hero-animate` to TrustSignal

Note: The nav (data-hero-nav) should be added when/if there's a navigation component in the hero. For now, we can skip phase 2 or apply it to the section wrapper.

Example Hero.tsx update:
```tsx
"use client";

import { cn } from "@/lib/utils";
import { HeroContent } from "./HeroContent";
import { PhoneMockup } from "./PhoneMockup";
import { ActivityFeed } from "./ActivityFeed";
import { useHeroEntrance } from "@/lib/hooks/useHeroEntrance";

export function Hero({ className }: HeroProps) {
  const { scopeRef } = useHeroEntrance();

  return (
    <section
      ref={scopeRef as React.RefObject<HTMLElement>}
      data-hero-bg
      data-hero-animate
      className={cn(...)}
    >
      {/* ... */}
      <div className="order-1 lg:order-2 flex justify-center" data-hero-mockup data-hero-animate>
        <PhoneMockup>
          <ActivityFeed />
        </PhoneMockup>
      </div>
    </section>
  );
}
```

Example HeroContent.tsx update:
```tsx
<h1 data-hero-headline data-hero-animate className={...}>...</h1>
<p data-hero-subheadline data-hero-animate className={...}>...</p>
<div className="mt-8" data-hero-cta data-hero-animate>
  <CTAGroup ... />
</div>
<TrustSignal data-hero-animate ... />
```
  </action>
  <verify>npm run build succeeds; Hero section has data-hero-* attributes visible in browser DevTools</verify>
  <done>Hero and HeroContent have data attributes for GSAP timeline targeting; useHeroEntrance wired</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - no TypeScript errors
2. Run `npm run dev` and visit homepage
3. Verify hero entrance plays:
   - Background fades in first
   - Headline reveals with upward motion
   - CTAs scale in with bounce
   - Phone mockup rises with larger motion (60px)
4. Test reduced motion: Enable "Reduce motion" in OS settings
   - Verify elements fade in without movement
   - Duration should be ~150ms total
5. Check DevTools console for 'hero-entrance-complete' event firing at ~1s
</verification>

<success_criteria>
- Hero entrance completes in ~1.2s with visible choreography
- 7 distinct phases are observable (with slight overlaps per design)
- Phone mockup has noticeably larger motion than text elements
- Reduced motion preference shows opacity-only fallback
- No console errors during animation
- Activity feed starts after hero entrance completes
</success_criteria>

<output>
After completion, create `.planning/phases/25-animation-choreography/25-01-SUMMARY.md`
</output>
