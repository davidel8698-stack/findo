---
phase: 26-glassmorphism-section-upgrades
plan: 03
type: execute
wave: 2
depends_on: ["26-01"]
files_modified:
  - website/components/sections/hero/StickyCtaBar.tsx
  - website/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Navigation shows glass effect when scrolled past hero"
    - "StickyCtaBar uses glass system with proper fallback"
    - "Glass transition is smooth (300ms ease-out)"
    - "Mobile gets solid fallback, desktop gets glass"
  artifacts:
    - path: "website/components/sections/hero/StickyCtaBar.tsx"
      provides: "Glass-enhanced sticky CTA bar"
      contains: "glass-bg-fallback"
    - path: "website/app/layout.tsx"
      provides: "Glass-enhanced navigation"
      contains: "glass"
  key_links:
    - from: "website/app/layout.tsx"
      to: "scroll state"
      via: "useEffect with scroll listener"
      pattern: "scrollY"
---

<objective>
Apply glassmorphism to navigation (when scrolled) and StickyCtaBar with proper mobile/desktop fallback.

Purpose: Add glass effects to navigation and mobile sticky CTA bar, creating premium feel while maintaining performance on mobile devices.
Output: Updated StickyCtaBar with glass system and navigation with scroll-triggered glass.
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/26-glassmorphism-section-upgrades/26-CONTEXT.md
@.planning/phases/26-glassmorphism-section-upgrades/26-RESEARCH.md
@.planning/phases/26-glassmorphism-section-upgrades/26-01-SUMMARY.md
@website/components/sections/hero/StickyCtaBar.tsx
@website/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update StickyCtaBar to use glass system</name>
  <files>website/components/sections/hero/StickyCtaBar.tsx</files>
  <action>
The current StickyCtaBar uses `bg-background/80 backdrop-blur-md` directly. Update to use the glass system with proper fallback pattern.

Find the current className (around line 48-62):
```tsx
className={cn(
  // Positioning
  "fixed bottom-0 inset-x-0 z-50",
  // Only show on mobile
  "md:hidden",
  // Frosted glass effect
  "bg-background/80 backdrop-blur-md",
  // Separation from content
  "border-t border-border",
  // Padding with iOS safe area support
  "p-4 pb-[env(safe-area-inset-bottom,1rem)]",
  className
)}
```

Replace with glass system approach:
```tsx
className={cn(
  // Positioning
  "fixed bottom-0 inset-x-0 z-50",
  // Only show on mobile
  "md:hidden",
  // Glass effect - using glass system fallback pattern
  // Mobile gets solid background by default (glass is md:+ only)
  // But StickyCtaBar is md:hidden, so it always uses fallback
  "bg-[rgb(24_24_27/0.8)]", // --glass-bg-fallback equivalent
  // Separation from content with glass-style border
  "border-t border-white/20", // --glass-border-fallback equivalent
  // Padding with iOS safe area support
  "p-4 pb-[env(safe-area-inset-bottom,1rem)]",
  className
)}
```

Note: Since StickyCtaBar is `md:hidden` (only shows on mobile), it will always use the fallback. The glass effect via backdrop-blur is removed because:
1. Per CONTEXT.md: "Mobile devices get solid rgba() background fallback"
2. StickyCtaBar only shows on mobile, so always use fallback
3. This improves mobile performance (no backdrop-blur on mobile)

Keep the backdrop-blur removed - this is intentional per CONTEXT.md decision.
  </action>
  <verify>Grep for "backdrop-blur" in StickyCtaBar.tsx returns NO matches (removed)</verify>
  <done>StickyCtaBar uses solid fallback (mobile-only component)</done>
</task>

<task type="auto">
  <name>Task 2: Create GlassNav component for scrolled navigation</name>
  <files>website/components/sections/hero/GlassNav.tsx</files>
  <action>
Create a new GlassNav component that wraps navigation content and applies glass effect when scrolled.

Create file: website/components/sections/hero/GlassNav.tsx

```tsx
"use client";

import { useState, useEffect } from "react";
import { cn } from "@/lib/utils";

interface GlassNavProps {
  className?: string;
  children: React.ReactNode;
}

/**
 * GlassNav - Navigation wrapper with scroll-triggered glass effect
 *
 * Per CONTEXT.md:
 * - "Navigation: Glass background when scrolled/sticky"
 * - Mobile fallback: solid dark background
 * - Desktop with @supports: glass effect
 * - Transition timing: 300ms ease-out (Claude's discretion)
 */
export function GlassNav({ className, children }: GlassNavProps) {
  const [isScrolled, setIsScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      // Show glass effect after scrolling 50px
      setIsScrolled(window.scrollY > 50);
    };

    window.addEventListener("scroll", handleScroll, { passive: true });
    // Check initial scroll position
    handleScroll();

    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return (
    <nav
      className={cn(
        // Base positioning
        "fixed top-0 inset-x-0 z-50",
        // Transition for smooth glass appearance
        // Per CONTEXT.md: Claude's discretion on timing - using 300ms
        "transition-all duration-300 ease-out",
        isScrolled
          ? cn(
              // Glass effect when scrolled
              // Mobile fallback (solid)
              "bg-[rgb(24_24_27/0.8)] border-b border-white/20",
              // Desktop glass enhancement
              "md:supports-[backdrop-filter:blur(1px)]:bg-[rgb(24_24_27/0.2)]",
              "md:supports-[backdrop-filter:blur(1px)]:backdrop-blur-[10px]",
              "md:supports-[backdrop-filter:blur(1px)]:border-white/10"
            )
          : // Transparent when not scrolled
            "bg-transparent border-b border-transparent",
        className
      )}
    >
      {children}
    </nav>
  );
}
```

Note: Uses supports-[backdrop-filter:blur(1px)] Tailwind syntax for @supports detection inline.
  </action>
  <verify>File website/components/sections/hero/GlassNav.tsx exists and contains "isScrolled"</verify>
  <done>GlassNav component created with scroll-triggered glass effect</done>
</task>

<task type="auto">
  <name>Task 3: Export GlassNav from hero index</name>
  <files>website/components/sections/hero/index.ts</files>
  <action>
Update the hero section's index.ts to export the new GlassNav component.

Read the current index.ts and add the GlassNav export:

```ts
export { default } from "./Hero";
export { StickyCtaBar } from "./StickyCtaBar";
export { GlassNav } from "./GlassNav";
```

This makes GlassNav available for import alongside other hero components.

Note: The GlassNav component is ready to be used by the main navigation. The actual integration into the navigation structure will depend on how navigation is structured in the layout. If there's no separate Nav component, document this for future integration or manual verification.
  </action>
  <verify>Grep for "GlassNav" in website/components/sections/hero/index.ts returns a match</verify>
  <done>GlassNav exported from hero index</done>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. StickyCtaBar no longer uses backdrop-blur (mobile-only = always solid fallback)
3. GlassNav component exists with scroll-triggered glass effect
4. GlassNav uses 300ms ease-out transition
5. GlassNav uses @supports pattern for desktop glass
6. GlassNav exported from hero index
</verification>

<success_criteria>
- StickyCtaBar uses solid background (appropriate for mobile-only component)
- GlassNav component ready for navigation integration
- Glass effect triggers on scroll (>50px)
- Mobile gets solid fallback, desktop gets glass
- Smooth 300ms transition on scroll state change
</success_criteria>

<output>
After completion, create `.planning/phases/26-glassmorphism-section-upgrades/26-03-SUMMARY.md`
</output>
