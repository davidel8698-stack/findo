---
phase: 31-motion-accessibility
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - website/components/ui/skip-link.tsx
  - website/app/layout.tsx
  - website/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Skip link appears on Tab from page load (first focusable element)"
    - "Skip link is visually hidden until focused"
    - "Focus ring visible on all interactive elements using :focus-visible"
    - "Skip link navigates to #main-content anchor"
  artifacts:
    - path: "website/components/ui/skip-link.tsx"
      provides: "SkipLink component with sr-only + focus:not-sr-only pattern"
      exports: ["SkipLink"]
    - path: "website/app/layout.tsx"
      provides: "SkipLink as first child in body, main-content id on wrapper"
      contains: ["SkipLink", "main-content"]
    - path: "website/app/globals.css"
      provides: "Enhanced :focus-visible styles with 2px ring + offset"
      contains: [":focus-visible", "outline-offset"]
  key_links:
    - from: "website/components/ui/skip-link.tsx"
      to: "website/app/layout.tsx"
      via: "Import and render as first child"
      pattern: "import.*SkipLink"
    - from: "website/app/layout.tsx"
      to: "#main-content"
      via: "id attribute on main wrapper"
      pattern: 'id="main-content"'
---

<objective>
Implement skip-to-content link and enhanced focus states for accessibility.

Purpose: Create the skip link (A11Y-01), enhance focus indicators (A11Y-02), and strengthen reduced motion (A11Y-03).
Output: SkipLink component, enhanced focus-visible CSS, layout integration
</objective>

<execution_context>
@C:\Users\דודאלמועלם\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\דודאלמועלם\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-motion-accessibility/31-RESEARCH.md
@.planning/phases/31-motion-accessibility/31-CONTEXT.md
@website/app/layout.tsx
@website/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SkipLink component</name>
  <files>website/components/ui/skip-link.tsx</files>
  <action>
Create a new skip-to-content link component following WCAG best practices.

Create the file with:
```typescript
"use client";

import { cn } from "@/lib/utils";

/**
 * SkipLink - Accessibility skip-to-content link (A11Y-01)
 *
 * WCAG 2.4.1: Bypass Blocks - allows keyboard users to skip navigation
 * Must be first focusable element in the document
 *
 * Pattern: sr-only (screen-reader accessible but hidden) until focused
 */
export function SkipLink() {
  return (
    <a
      href="#main-content"
      className={cn(
        // Off-screen by default (accessible to screen readers)
        "sr-only focus:not-sr-only",
        // On focus: fixed position, high z-index, centered
        "focus:fixed focus:top-4 focus:left-1/2 focus:-translate-x-1/2 focus:z-[100]",
        // Visual styling
        "bg-primary text-primary-foreground",
        "px-6 py-3 rounded-lg",
        "font-semibold text-sm",
        // Focus ring per CONTEXT.md (2px ring, primary color, 2px offset)
        "focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background",
        // Ensure 48px minimum touch target (A11Y-06)
        "min-h-[48px] flex items-center"
      )}
    >
      {/* Hebrew: "Skip to main content" */}
      דלג לתוכן הראשי
    </a>
  );
}
```

The component must:
- Use sr-only class for initial hiding
- Become visible on focus with focus:not-sr-only
- Position fixed at top center when visible
- Have 48px minimum height (touch target)
- Include focus ring
  </action>
  <verify>
File exists: `ls website/components/ui/skip-link.tsx`
Has export: `grep "export function SkipLink" website/components/ui/skip-link.tsx`
  </verify>
  <done>
SkipLink component created with sr-only/focus:not-sr-only pattern and proper styling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate SkipLink into layout and add main-content anchor</name>
  <files>website/app/layout.tsx</files>
  <action>
Add SkipLink as first element inside body and add id="main-content" to the content wrapper.

1. Add import at top (with other component imports):
```typescript
import { SkipLink } from "@/components/ui/skip-link";
```

2. Modify the body content to add SkipLink FIRST and main-content id on wrapper:
```tsx
<body className={`${heebo.className} antialiased`}>
  <SkipLink />
  <BackgroundDepth />
  <Providers>
    <Navigation />
    <Suspense fallback={null}>
      <PostHogPageview />
    </Suspense>
    <main id="main-content" className="pt-16">
      {children}
    </main>
  </Providers>
</body>
```

Key changes:
- SkipLink is FIRST child in body (before BackgroundDepth)
- Change the div.pt-16 wrapper to main#main-content for semantic HTML
- Keep pt-16 class for nav clearance

This ensures:
- SkipLink is first focusable element (Tab from anywhere goes here first)
- #main-content anchor exists for the skip link to target
- Semantic main element for screen readers
  </action>
  <verify>
SkipLink imported: `grep "import.*SkipLink" website/app/layout.tsx`
SkipLink rendered first: `grep -A2 "<body" website/app/layout.tsx | grep "SkipLink"`
Main content id: `grep 'id="main-content"' website/app/layout.tsx`
  </verify>
  <done>
SkipLink is first child in body, main element has id="main-content" anchor.
  </done>
</task>

<task type="auto">
  <name>Task 3: Enhance focus-visible and reduced motion CSS</name>
  <files>website/app/globals.css</files>
  <action>
Verify and enhance the existing :focus-visible styles per CONTEXT.md decisions.

Find the existing :focus-visible section (search for "Focus visible outlines") and ensure it matches:
```css
/* Focus visible outlines with primary color - A11Y-02 */
/* Per CONTEXT.md: 2px ring, primary accent color, 2px offset, :focus-visible only */
:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}
```

If it already exists with these values, leave it unchanged.

Also verify the reduced motion section covers shimmer and decorative animations. Find the existing `@media (prefers-reduced-motion: reduce)` section and ensure it includes:
```css
/* Shimmer disabled completely per CONTEXT.md */
.shimmer-border::before {
  animation: none !important;
  background: hsl(var(--primary) / 0.2);
}
```

Add this shimmer rule if not already present in the reduced motion media query.
  </action>
  <verify>
Focus-visible check: `grep -A2 ":focus-visible" website/app/globals.css | grep "outline: 2px"`
Reduced motion shimmer: `grep -A2 "shimmer-border" website/app/globals.css | grep "animation: none"`
  </verify>
  <done>
:focus-visible has 2px ring with 2px offset. Reduced motion disables shimmer animation.
  </done>
</task>

</tasks>

<verification>
1. Skip link works: Open site, press Tab from URL bar, skip link should appear
2. Skip link navigates: Click/Enter on skip link, focus should move to main content
3. Focus ring visible: Tab through interactive elements, 2px orange ring visible
4. Reduced motion: Enable "Reduce motion" in OS, shimmer should be static
5. Build passes: `cd website && npm run build` completes without errors
</verification>

<success_criteria>
- [ ] SkipLink component exists with sr-only/focus:not-sr-only pattern
- [ ] SkipLink is first child in body (before BackgroundDepth)
- [ ] main element has id="main-content"
- [ ] :focus-visible has 2px outline with 2px offset
- [ ] Reduced motion disables shimmer
- [ ] Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/31-motion-accessibility/31-03-SUMMARY.md`
</output>
