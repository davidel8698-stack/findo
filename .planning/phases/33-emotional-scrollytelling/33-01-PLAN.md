# Plan 33-01: Emotional Scrollytelling Section

## Goal
Build Terminal Industries-inspired scrollytelling section with scroll-driven typewriter text, particle field, grid pattern, and dramatic ending for Hebrew content.

## Prerequisites
- [x] GSAP ScrollTrigger configured (lib/gsapConfig.ts)
- [x] Motion system in place (Phase 31)
- [x] Color tokens defined (Phase 28)

## Tasks

### Task 1: Create folder structure
**Files:**
```
website/components/sections/scrollytelling/
├── index.ts
├── ScrollytellingSection.tsx
├── TypewriterText.tsx
├── ParticleField.tsx
├── GridPattern.tsx
├── DramaticReveal.tsx
├── scrollytelling.module.css
└── content.ts (Hebrew content)
```

### Task 2: Build GridPattern component
**Purpose:** Background grid with accent dots at intersections

```tsx
// GridPattern.tsx
export function GridPattern({ intensity = 0.3 }: { intensity?: number }) {
  return (
    <div
      className={styles.grid}
      style={{ '--grid-intensity': intensity } as React.CSSProperties}
    />
  );
}
```

**CSS:**
- 60px grid cells
- 3% white lines
- Orange accent dots at intersections
- Fade based on intensity prop

### Task 3: Build ParticleField component
**Purpose:** Floating particles with CSS animations

**Approach:**
- Generate 50-80 particles with random positions
- Use CSS keyframes for floating animation
- Particles have varying sizes (2-6px), opacities (0.1-0.5), speeds (10-30s)
- Use useMemo to prevent re-renders
- Reduce to 20-30 on mobile

```tsx
// ParticleField.tsx
const particles = useMemo(() =>
  Array.from({ length: particleCount }, (_, i) => ({
    id: i,
    x: Math.random() * 100,
    y: Math.random() * 100,
    size: 2 + Math.random() * 4,
    duration: 10 + Math.random() * 20,
    delay: Math.random() * 10,
  }))
, [particleCount]);
```

### Task 4: Build TypewriterText component
**Purpose:** Scroll-driven character reveal for Hebrew (RTL)

**Key considerations:**
- Split text into characters (preserve spaces)
- CSS handles RTL display direction
- Progress prop (0-1) controls visible characters
- Smooth opacity transition for current character

```tsx
// TypewriterText.tsx
interface Props {
  text: string;
  progress: number; // 0 to 1
  className?: string;
}

export function TypewriterText({ text, progress, className }: Props) {
  const chars = text.split('');
  const visibleCount = Math.floor(chars.length * progress);

  return (
    <span className={cn(styles.typewriter, className)} dir="rtl">
      {chars.map((char, i) => (
        <span
          key={i}
          className={cn(
            styles.char,
            i < visibleCount && styles.visible,
            i === visibleCount && styles.current
          )}
        >
          {char === ' ' ? '\u00A0' : char}
        </span>
      ))}
    </span>
  );
}
```

### Task 5: Build DramaticReveal component
**Purpose:** Large letter reveal for "הגעתם למקום הנכון"

**Approach:**
- Split into individual letters
- Each letter animates in with scale + opacity
- Stagger from right (RTL)
- Final pulse/glow effect

```tsx
// DramaticReveal.tsx
const letters = "הגעתם למקום הנכון".split('');

// Animate each letter with progress
```

### Task 6: Build ScrollytellingSection
**Purpose:** Main container orchestrating all components

**Structure:**
```tsx
<section ref={containerRef} className={styles.container}>
  <GridPattern intensity={gridIntensity} />
  <ParticleField density={particleDensity} />

  <div className={styles.content}>
    {phases.map((phase, i) => (
      <div key={i} className={styles.phase}>
        <TypewriterText
          text={phase.text}
          progress={getPhaseProgress(i)}
        />
      </div>
    ))}
  </div>

  <DramaticReveal progress={finalProgress} />
</section>
```

**ScrollTrigger setup:**
```tsx
useGSAP(() => {
  ScrollTrigger.create({
    trigger: containerRef.current,
    start: "top top",
    end: "+=5000",
    scrub: 1,
    pin: true,
    onUpdate: (self) => {
      setProgress(self.progress);
    }
  });
}, { scope: containerRef });
```

### Task 7: Create content.ts
**Purpose:** Hebrew content for all phases

```typescript
export const scrollytellingContent = {
  phases: [
    {
      id: 'hook',
      lines: [
        'אם הגעתם לכאן,',
        'יתכן שמשהו בשיווק של העסק שלכם לא מרגיש יציב.'
      ]
    },
    // ... all 7 phases
  ],
  finale: 'הגעתם למקום הנכון.'
};
```

### Task 8: Integrate into page.tsx
**Add after Hero section**

```tsx
import { ScrollytellingSection } from "@/components/sections/scrollytelling";

export default function HomePage() {
  return (
    <main>
      <Hero />
      <ScrollytellingSection />
      <StickyCtaBar />
    </main>
  );
}
```

### Task 9: Add reduced motion support
**In globals.css or module:**
```css
@media (prefers-reduced-motion: reduce) {
  .particle { animation: none; }
  .typewriter .char {
    opacity: 1 !important;
    transition: none;
  }
}
```

## Verification

1. [ ] Typewriter reveals Hebrew text RTL correctly
2. [ ] Particles float smoothly at 60fps
3. [ ] Grid pattern visible with orange accent dots
4. [ ] All 7 phases reveal in sequence during scroll
5. [ ] Dramatic ending shows large letters
6. [ ] Mobile: reduced particles, shorter scroll
7. [ ] prefers-reduced-motion: static fallback
8. [ ] No hydration errors (deterministic initial state)

## Files to Create/Modify

**Create:**
- website/components/sections/scrollytelling/index.ts
- website/components/sections/scrollytelling/ScrollytellingSection.tsx
- website/components/sections/scrollytelling/TypewriterText.tsx
- website/components/sections/scrollytelling/ParticleField.tsx
- website/components/sections/scrollytelling/GridPattern.tsx
- website/components/sections/scrollytelling/DramaticReveal.tsx
- website/components/sections/scrollytelling/scrollytelling.module.css
- website/components/sections/scrollytelling/content.ts

**Modify:**
- website/app/page.tsx (add section)

---
*Plan created: 2026-02-10*
